# 堆（heap）

### 性质

堆是非线性的树形的数据结构，有两种堆,最大堆与最小堆。 **（heapq库中的堆默认是最小堆）**

* python的heapq模块提供了对堆的支持。 heapq堆数据结构最重要的特征是heap[0]永远是最小的元素

* 最大堆，树种各个父节点的值总是大于或等于任何一个子节点的值。

* 最小堆，树种各个父节点的值总是小于或等于任何一个子节点的值。

* 我们一般使用二叉堆来实现优先级队列,它的内部调整算法复杂度为logN。

* 堆是一个二叉树，其中最小堆每个父节点的值都小于或等于其所有子节点的值。

* 整个最小堆的最小元素总是位于二叉树的根节点。



堆的实现通过构造**二叉堆**（binary heap），实为[二叉树](https://zh.wikipedia.org/wiki/二叉树)的一种；由于其应用的普遍性，当不加限定时，均指该数据结构的这种实现。这种数据结构具有以下性质。

- 任意节点小于（或大于）它的所有后裔，最小元（或最大元）在堆的根上（**堆序性**）。
- 堆总是一棵[完全树](https://zh.wikipedia.org/wiki/完全二叉树)。即除了最底层，其他层的节点都被元素填满，且最底层尽可能地从左到右填入。

### 实现

- 堆的主要操作是插入和删除最小元素(元素值本身为优先级键值，小元素享有高优先级)
- 在插入或者删除操作之后，我们必须保持该实现应有的性质: 1. 完全二叉树 2. 每个节点值都小于或等于它的子节点

## 模块heapq中一些重要的函数

| 函 数                | 描 述                         |
| -------------------- | ----------------------------- |
| heappop(heap)        | 从堆中弹出最小的元素          |
| heapify(heap)        | 让列表具备堆特征              |
| heapreplace(heap, x) | 弹出最小的元素，并将x压入堆中 |
| nlargest(n, iter)    | 返回iter中n个最大的元素       |
| nsmallest(n, iter)   | 返回iter中n个最小的元素       |
| heappush(heap,x)     | 将x压入堆中                   |



# 场景

* 排序：最小数值出堆（heap[0]）/ -值找出最大值